---
layout:     post
title:      "T检验"
subtitle:   " \"原理与在spss中的应用\""
date:       2018-08-12 16:00:00
author:     "Rumia"
header-img: "img/post-bg-hello.jpg"
catalog: true
category: blog
tags:
    - 数据分析
    - 统计学
    - spss
---

## What is T 检验？

T检验，亦称student t检验（Student's t test），主要用于样本含量较小（例如n<30），[总体标准差](https://baike.baidu.com/item/%E6%80%BB%E4%BD%93%E6%A0%87%E5%87%86%E5%B7%AE)σ未知的[正态分布](https://baike.baidu.com/item/%E6%AD%A3%E6%80%81%E5%88%86%E5%B8%83)。t检验是用t分布理论来推论差异发生的概率，从而比较两个平均数的差异是否显著。T检验可用于比较均值，检查抽样样本是否来自一已知总体。要详细解释t检验，首先引入一些统计学的基本原理知识。

---------------------------------------------------------------------------------------

### 假设检验

> 对提出的一些总体假设进行分析判断，做出统计决策。

Why 检验？

  通过获得随机样本来实施抽样研究的例子很多，但此时研究中直接获取的只是样本的情况，而研究者关心的并不仅仅是样本，更**希望了解相应的总体特征**。

#### 原理

- 基础 ：小概率原理，即一**般认为** 小概率事件在一次随机抽样中不会发生
- 基本思想：先建立一个关于样本所属总体的假设，考察**在假设条件**下随机样本的**特征信息是否属小概率事件**，若为小概率事件，则怀疑假设成立有悖于该样本所提供特征信息，因此拒绝假设
- 事实上，小概率事件在随机抽样中还是可能发生的，只是发生的概率很小。若正好碰上了，则假设检验的结论就是错误的。当然，**犯这种错误的概率很小**

#### 基本步骤

1. 建立假设：
   - 根据统计推断的目的而提出的对总体特征的假设。统计学中的假设有两方面的内容：
   - 一是检验假设(hypothesis to be tested),亦称**原假设**或无效假设(null hypothesis)，**记为H0** ；
   - 二是与H0相对立的**备择假设**(alternative hypothesis)，**记为H1** 。后者的意义在于**当H0 被拒绝时供采用。两者是互斥的**，非此即彼。
   	 H0：μ =μ0，    	 H1：μ≠0；
   	 H0：μ =7.4，	 	H1：μ≠7.4。 
2. 确定检验水准
   - 实际上就是**确定拒绝H0时的最大允许误差的概率**。检验水准(size of test)，常用α表示，是指检验假设H0本来是成立的，而根据样本信息拒绝H0的可能性大小的度量，换言之，**α是拒绝了实际上成立的H0的概率**。
   - 常用的检验水准为α = 0.05，其意义是：在所设H0的总体中随机抽得一个样本，其均数**比手头样本均数更偏离总体均数的概率不超过5%** 。
3. 计算检验统计量和P值
   - 实际上在此之前还有一步叫做进行试验，所需的样本数据即从此得来
   - 统计量只是工具，**概率值才是目的**，它可以客观**衡量样本对假设总体偏离程度**
     - 从H0假设的总体中**抽出现有样本**（及更极端情况）**的概率**，即P值
     - 例如600次赢100次是H0假设的情况，只赢1次就是现有样本情况，更极端的情况就是连一次也没有赢
   - 检验统计量的特点
     - 该统计量应当服从某种已知分布，从而可以计算出P值
     - 各种检验方法所利用的分布及计算原理不同，从而检验统计量也不同
4. 得出推断结论
   - 按照事先确定的检验水准α界定上面得到的P值，并按小概率原理认定对H0的取舍，作出推断结论
   - if (p<α)
     - 基于H0假设的总体情况出现了小概率事件
     - 则拒绝H0，接受H1，可以认为**样本与总体的差别不仅仅是抽样误差** **造成的** ，可能存在本质上的差别，属“非偶然的(significant)”，因此，可以认为两者的**差别有统计学意义**。
   - else
     - 基于H0出现了很常见的事件
     - 则样本与总体间的差别尚不**能排除纯粹由抽样误差造成**，**可能的确属“偶然的**(non-significant)”，故尚不能拒绝H0
     - 因此，认为两者的差别无统计学意义，但这**并不意味着可以接受H0**。
5. 应该注意的一些问题
   - 结论不能绝对化
     - 本身就保留了犯错误的可能性
     - 样本量导致的检验效能问题
       - 样本量太小，导致检验效能不足，从而无法检出可能存在的差异
       - 样本量太大，得出的有统计学意义的结论可能根本就没有实际意义

------------------------------------------------------

### 单样本t检验

$$
t=\frac{\bar{x}-\mu}{s_{\bar{x}}}
$$

**单样本t检验**是检验一个[样本平均数](https://baike.baidu.com/item/%E6%A0%B7%E6%9C%AC%E5%B9%B3%E5%9D%87%E6%95%B0)与一个已知的[总体平均数](https://baike.baidu.com/item/%E6%80%BB%E4%BD%93%E5%B9%B3%E5%9D%87%E6%95%B0)的差异是否显著。当[总体分布](https://baike.baidu.com/item/%E6%80%BB%E4%BD%93%E5%88%86%E5%B8%83)是正态分布，如总体标准差未知且[样本容量](https://baike.baidu.com/item/%E6%A0%B7%E6%9C%AC%E5%AE%B9%E9%87%8F)小于30，那么样本平均数与总体平均数的[离差](https://baike.baidu.com/item/%E7%A6%BB%E5%B7%AE)[统计量](https://baike.baidu.com/item/%E7%BB%9F%E8%AE%A1%E9%87%8F)呈t分布。

​	x ：样本平均数

​	μ ： 已知总体平均数

​	s ：标准误

##### 适用条件

- 因为有[中心极限定理](https://baike.baidu.com/item/%E4%B8%AD%E5%BF%83%E6%9E%81%E9%99%90%E5%AE%9A%E7%90%86/829451?fr=aladdin)，一般均数的抽样分布都不会有问题，真正会限制该方法使用的是均数是否能够代表相应数据的集中趋势。
- 也就是说，只要数据分布不是强烈的偏态，一般而言单样本t检验都是适用的。
- Bootstrap 抽样可以在一定程度下解决这个问题

### 完全随机的两样本t检验

- 目的：

  推断两个样本是否来自相同的总体，更具体地说，是要检验两样本所代表的总体均数是否相等。

- 检验假设：

  - 无效假设 H0 ：μ1=μ2
  - 备择假设 H1 ：μ1≠μ2
  - 检验水准 α  = 0.05

- 原理


$$
  t= \frac{\bar{x}_1-{\bar{x}_2}}{s_{\bar{{x_1}}-{\bar{x_2}}}}
$$

- 适用条件

  - 正态性 ：有一定的耐受能力，可以通过直方图等进行观察，偏的不厉害就行

    - 注意应当分组考察

  - 独立性 ：对结果的影响较大，但一般没问题

  - 方差齐性：相对而言对结论的影响较大，需要进行方差齐性检验


### 配对t检验

- 原理

  
  $$
  t=\frac{\bar{D}}{S/\sqrt{n}}
  $$

- 配对设计的两种情况

  - 对**同一个受试对象处理前后**的比较
  - 将受试对象按情况**相近者配对**（或者自身进行配对），分别给予两种处理，以观察两种处理效果有无差别。

- 配对设计的特点

  - 在配对设计得到的样本数据中，每对数据之间都有一定的相关，如果采用成组的t检验就无法利用这种关系，浪费了大量统计信息

  - 对于这种情况，统计学上的解决办法是**求出每对的差值**，通过检验该差值总体均数是否为0，就可以得知两种处理有无差异。

    -------------------------------------------------------------------------

   

参考资料

张文彤《SPSS20.0统计分析基础教程第2版》
